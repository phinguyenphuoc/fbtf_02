<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBzjvFAQYkrRuqhMbTdpsxwIdRPhFW3H7g"
type="text/javascript"></script>
<script type="text/javascript">
  $(function() {
    getLocation.initialize();
  });

  var getLocation = {
    initialize: function() {
      getLocation.fetch_data();
    },

    fetch_data: function() {
      var url_path = window.location.pathname;
      $.get(url_path, function(data) {
        var addresses = data['addresses'];
          console.log(addresses);
          const latitude = addresses.latitude;
          const longitude = addresses.longitude;
          getLocation.draw_map(latitude, longitude);
      }, 'json');
    },

    draw_map: function(lat, lng) {
      var companyLatlng = new google.maps.LatLng(lat, lng);
      var mapOptions = {
      zoom: 15,
      center: companyLatlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
      }
      var map = new google.maps.Map(document.getElementById('map'), mapOptions);
      var marker = new google.maps.Marker({
        position: companyLatlng,
        map: map
      });
    }
  }
</script>

<div class="border">
  <div id="map" class="map"></div>
  <div class="general-info">
    <div class="tour_info">
      <p class="general-info-item">
        <i class="fa fa-map-marker" title="Điểm Đến" ></i>
        <%= @tour_details.travelling.location_end.name %>
      </p>
      <p class="general-info-item">
        <i class="fa fa-clock-o" title="Số Ngày"></i>
        <%= ((@tour_details.time_end).to_date - (@tour_details.time_start).to_date).to_i %> <%= t(".dates") %>
      </p>
      <p class="general-info-item">
        <i class="fa fa-send" title="Phương Tiện" ></i>
        <%= t(".vehicle") %>
        <i class="fas fa-bus" title="Di Chuyển Bằng Ô Tô"></i>
        <i class="fas fa-plane" title="Di Chuyển Bằng Máy Bay"></i>
      </p>
      <p class="general-info-item"><i class="fa fa-flag-checkered"></i>
        <%= t(".time_start") %>
        <%= l @tour_details.time_start, format: :defaut %>
      </p>
    </div>
    <div class="star_rating">
      <p class="m-0"><i class="fa fa-star checked"></i>
        <%= t(".avg_rating") %>
        <div class='review-rating' data-score=<%= @avg_rating %>></div>
      </p>
    </div>
  </div>
</div>
